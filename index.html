<!DOCTYPE html>
<html lang="zh-TW"> 
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç‹¼äººæ®ºéŠæˆ²</title>
  <base href="./">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/game.css">
  <style>
    .selected { border: 2px solid #f39c12 !important; }
    .chat-box { max-height: 200px; overflow-y: auto; border: 1px solid #ddd; padding: 8px; }
    .player-card { display: flex; justify-content: space-between; align-items: center; padding: 6px; border-bottom: 1px solid #eee; }
    .role-icon { width: 24px; height: 24px; }
  </style>
</head>
<body>

<div class="container">
  <!-- é é ­ -->
  <div class="header">
    <h1>ğŸº ç·šä¸Šç‹¼äººæ®º</h1>
    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
      <span class="player-info">ç©å®¶: <strong id="playerName"></strong></span>
      <button class="btn-info" id="playerInfoBtn">æˆ‘çš„è³‡è¨Š</button>
      <button class="btn-danger" id="logoutBtn">ç™»å‡º</button>
    </div>
  </div>

  <!-- å¤§å»³å€åŸŸ -->
  <div class="lobby-area" id="lobbyArea">
    <div class="content">
      <!-- å»ºç«‹æˆ¿é–“ -->
      <div class="card">
        <h2>å»ºç«‹æˆ¿é–“</h2>
        <div class="form-group">
          <label>æˆ¿è™Ÿï¼ˆå¯é¸ï¼‰</label>
          <input type="text" id="customRoomId" placeholder="ç•™ç©ºè‡ªå‹•ç”Ÿæˆ">
        </div>
        <button class="btn-primary" id="createRoomBtn" style="width: 100%;">å»ºç«‹æˆ¿é–“</button>
        <div class="error-msg" id="createError"></div>
      </div>

      <!-- åŠ å…¥æˆ¿é–“ -->
      <div class="card">
        <h2>åŠ å…¥æˆ¿é–“</h2>
        <div class="form-group">
          <label>æˆ¿è™Ÿ</label>
          <input type="text" id="joinRoomId" placeholder="è¼¸å…¥æˆ¿è™Ÿ">
        </div>
        <button class="btn-success" id="joinRoomBtn" style="width: 100%;">åŠ å…¥æˆ¿é–“</button>
        <div class="error-msg" id="joinError"></div>
      </div>
    </div>

    <!-- æˆ¿é–“åˆ—è¡¨ -->
    <div class="card">
      <h2>æˆ¿é–“åˆ—è¡¨</h2>
      <button class="btn-secondary" id="refreshRoomListBtn" style="width: 100%; margin-bottom: 15px;">åˆ·æ–°åˆ—è¡¨</button>
      <div class="room-list" id="roomList">
        <div style="text-align: center; color: #999; padding: 20px;">è¼‰å…¥ä¸­...</div>
      </div>
    </div>
  </div>

  <!-- ç©å®¶è³‡è¨Š Modal -->
  <div id="playerInfoModal" class="modal" style="display:none;">
    <div class="modal-content">
      <span class="close-btn" id="closePlayerInfoBtn">&times;</span>
      <h3>ç©å®¶è³‡è¨Š</h3>
      <div id="playerInfoContent">è¼‰å…¥ä¸­...</div>
    </div>
  </div>

  <!-- éŠæˆ²å€åŸŸ -->
  <div class="game-area" id="gameArea">
    <div class="card">
     <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
      <h2 style="margin: 0;">æˆ¿é–“ <span id="roomId"></span> | ä½ çš„è§’è‰²: <span id="myRole" style="color: #e74c3c;">?</span></h2>
      <button class="btn-primary" id="startGameBtn" style="display:none;">é–‹å§‹éŠæˆ²</button>
      <button class="btn-danger" id="leaveRoomBtn">é›¢é–‹æˆ¿é–“</button>
    </div>

      <hr class="divider">

      <!-- ç©å®¶åˆ—è¡¨ -->
      <h3 style="color: #333; margin-bottom: 10px;">ç©å®¶åˆ—è¡¨</h3>
      <div class="player-list" id="playerList"></div>

      <hr class="divider">

      <!-- å¤œæ™šè¡Œå‹• -->
      <div id="nightActionDiv" style="display: none;">
        <h3 style="color: #333; margin-bottom: 10px;">å¤œæ™šè¡Œå‹•</h3>
        <div id="nightActionArea" style="
             display: grid;
             grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
             gap: 8px;
             margin-bottom: 15px;
        "></div>
      </div>
      
      <!-- æˆ¿ä¸»å¤œæ™šçµç®—æŒ‰éˆ• -->
     <button class="btn-primary" id="resolveNightBtn" style="width:100%; margin-top:10px;">çµæŸå¤œæ™š</button>

      <!-- æŠ•ç¥¨ -->
      <div id="voteDiv" style="display: none;">
        <h3 style="color: #333; margin-bottom: 10px;">ç™½å¤©æŠ•ç¥¨</h3>
        <div id="voteArea" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 8px; margin-bottom: 10px;"></div>
        <button class="btn-primary" id="submitVoteBtn" style="width: 100%; margin-bottom: 15px;">æäº¤æŠ•ç¥¨</button>
      </div>

      <!-- èŠå¤©å®¤ -->
      <h3 style="color: #333; margin-bottom: 10px;">èŠå¤©å®¤</h3>
      <div class="chat-box" id="chatBox"></div>
      <div style="display: flex; gap: 10px;">
        <input type="text" id="chatInput" placeholder="è¼¸å…¥è¨Šæ¯..." style="flex: 1;">
        <button class="btn-primary" id="sendChatBtn" style="width: 100px;">é€å‡º</button>
      </div>
    </div>
  </div>
</div>

<script src="js/config.js"></script>
<script src="js/api.js"></script>
<script src="js/game.js"></script>
</body>
</html>
